<li class="micropost" id="post<%= micropost.id %>">
  <span class="content">
    <span>
      <%= form_for((@micropost), :html => { :id => "nl-form", :class => "nl-form" }, :remote => true, :authenticity_token => true) do |f| %>       
        <%= f.hidden_field :content, :value => micropost.content %>
        <%= f.hidden_field :tag_list, :value => micropost.tag_list%>
        <span id="selectme<%= micropost.id %>">
          <%= link_to "#{wrap(micropost.content)}", microposts_path(show: "matching_prompts", content: micropost.content) %>
          <input type="text" value="" placeholder="<%= micropost.content1 %>" id="micropost_content1" name="micropost[content1]" data-subline="Finish the sentence <em>in your own words.</em>"/>
          <div class="nl-overlay"></div>
        </span>
        <div class="nl-submit-wrap">
          <button id="btn<%= micropost.id %>" class="nl-submit" type="submit" name="commit" data-disable-with="Submitting">Post</button>
        </div>
        <i class="fa fa-picture-o" id="clicker<%= micropost.id %>"></i>
      <% end %>
    <p>Tags: <%= raw micropost.tag_list.map { |t| link_to t, tag_path(t) }.join(' ') %></p>
    <div id="vote<%= micropost.id %>">
      <span><%= pluralize micropost.reputation_for(:votes).to_i, "vote" %></span>
      <% unless micropost.user.id == current_user.id %>
        <% if current_user && micropost.has_evaluation?(:votes, current_user) %>
          <%= link_to '<i class="fa fa-heart fa-3x"></i>'.html_safe, vote_micropost_path(micropost, type: "down"), :method => :post, :remote => true %>
        <% else %>
          <%= link_to '<i class="fa fa-heart-o fa-3x"></i>'.html_safe, vote_micropost_path(micropost, type: "up"), :method => :post, :remote => true %>
        <% end %>
      <% end %>
    </div>
    </span>
    <span id="retweet<%= micropost.id %>">
      <% unless micropost.user.id == current_user.id %>
        <%= link_to '<i class="fa fa-retweet fa-3x"></i>'.html_safe, retweet_micropost_path(micropost), :method => :post, :remote => true %>
      <% end %>
    </span><span>
      <%= link_to '<i class="fa fa-comment fa-3x"></i>'.html_safe, micropost %>
    </span>

  </span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(micropost.created_at) %> ago.
  </span>
  <% if current_user?(micropost.user) %>
    <%= link_to "delete", micropost, method: :delete,
                                     :remote=>true,
                                     data: { confirm: "You sure?" },
                                     title: micropost.content %>
  <% end %>


<script>
  var nlform = new NLForm( document.getElementById( 'post<%= micropost.id %>' ) );
</script>
<script>
$(function() {
  $("i#clicker<%= micropost.id %>").click(function() {
    SelectText("selectme<%= micropost.id %>");
  });
});
</script>
<script>
$(function() {
  $("li#post<%= micropost.id %> form input").keyup(function() {
    $("span#author<%= micropost.id %>").hide();
    return $(".nl-form #btn<%= micropost.id %>").fadeIn();
  });
});
</script>
</li>